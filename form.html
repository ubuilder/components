<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form u-form method="GET" action="/form.html">
        <input u-field type="text" name="username">
        <input u-field type="text" name="email">
        <div u-field type="array">
            <label>html: <input u-field type="checkbox" name="language" value="html"></label>
            <label>css: <input u-field type="checkbox" name="language" value="css"></label>
            <label>js: <input u-field type="checkbox" name="language" value="js"></label>
        </div>
        <input type="submit">
    </form>

    <script>
        function getFields(el) {

            let fields = []
            el.querySelectorAll('[u-field]').forEach($el => {
                const field = {
                    name: $el.getAttribute('name'),
                    value: () => $el.value,
                    type: $el.getAttribute('type'),
                }

                if (field.type === 'array') {
                    field.fields = getFields($el)
                }
                fields.push(field)
                // 
            })
            return fields
        }

        document.querySelector('[u-form]').addEventListener('submit', event => {
            event.preventDefault()
            let inputs = {}
            let data = {}
            const fields = getFields(event.target)
            console.log(fields)

            //             if (field.type === 'checkbox') {
            //                 if (typeof data[field.name] !== 'undefined') {
            //                     if (typeof data[field.name] === 'boolean') {
            //                         data[field.name] = [data[field.name], field.checked]
            //                     } else {
            //                         data[field.name] = [...data[field.name], field.checked]
            //                     }

            //                 } else {
            //                     data[field.name] = field.checked
            //                 }
            //             } else {
            //                 data[field.name] = field.value
            //             }
            //         })
            //     console.log(data)
        })
    </script>
</body>

</html>